<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduction | vdes-template</title>
    <meta name="description" content="High performance javascript template engine">
    <link rel="stylesheet" href="/vdes-template/doc-en/assets/style.f3e9e911.css">
    <link rel="modulepreload" href="/vdes-template/doc-en/assets/Home.2292b6bc.js">
    <link rel="modulepreload" href="/vdes-template/doc-en/assets/app.8989515f.js">
    <link rel="modulepreload" href="/vdes-template/doc-en/assets/guide_index.md.26ae6196.lean.js">
    <link rel="modulepreload" href="/vdes-template/doc-en/assets/app.8989515f.js">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <meta name="twitter:title" content="Introduction | vdes-template">
    <meta property="og:title" content="Introduction | vdes-template">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-6ed1e12a><div class="sidebar-button" data-v-6ed1e12a><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/vdes-template/doc-en/" aria-label="vdes-template, back to home" data-v-6ed1e12a data-v-ad3e7cfe><img class="logo" src="/vdes-template/doc-en/logo.svg" alt="Logo" data-v-ad3e7cfe> vdes-template</a><div class="flex-grow" data-v-6ed1e12a></div><div class="nav" data-v-6ed1e12a><nav class="nav-links" data-v-6ed1e12a data-v-59634de5><!--[--><div class="item" data-v-59634de5><div class="nav-link" data-v-59634de5 data-v-fca5ba4e><a class="item" href="/vdes-template/doc-en/guide/" data-v-fca5ba4e>Guide <!----></a></div></div><div class="item" data-v-59634de5><div class="nav-link" data-v-59634de5 data-v-fca5ba4e><a class="item" href="/vdes-template/doc-en/plugins/" data-v-fca5ba4e>Plugins <!----></a></div></div><div class="item" data-v-59634de5><div class="nav-link" data-v-59634de5 data-v-fca5ba4e><a class="item" href="/vdes-template/doc-en/playground/" data-v-fca5ba4e>Playground <!----></a></div></div><div class="item" data-v-59634de5><div class="nav-dropdown-link" data-v-59634de5 data-v-6b1b155c><button class="button" data-v-6b1b155c><span class="button-text" data-v-6b1b155c>Languages</span><span class="right button-arrow" data-v-6b1b155c></span></button><ul class="dialog" data-v-6b1b155c><!--[--><li class="dialog-item" data-v-6b1b155c><div class="nav-dropdown-link-item" data-v-6b1b155c data-v-8cf50262><a class="item" href="/vdes-template/doc-en/" data-v-8cf50262><span class="arrow" data-v-8cf50262></span><span class="text" data-v-8cf50262>English</span><span class="icon" data-v-8cf50262><!----></span></a></div></li><li class="dialog-item" data-v-6b1b155c><div class="nav-dropdown-link-item" data-v-6b1b155c data-v-8cf50262><a class="item" href="/vdes-template/doc-en/" data-v-8cf50262><span class="arrow" data-v-8cf50262></span><span class="text" data-v-8cf50262>中文</span><span class="icon" data-v-8cf50262><!----></span></a></div></li><!--]--></ul></div></div><!--]--><!----><div class="item" data-v-59634de5><div class="nav-link" data-v-59634de5 data-v-fca5ba4e><a class="item isExternal" href="https://github.com/vdesjs/vdes-template" target="_blank" rel="noopener noreferrer" data-v-fca5ba4e>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-fca5ba4e><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-0440da26><nav class="nav-links nav" data-v-0440da26 data-v-59634de5><!--[--><div class="item" data-v-59634de5><div class="nav-link" data-v-59634de5 data-v-fca5ba4e><a class="item" href="/vdes-template/doc-en/guide/" data-v-fca5ba4e>Guide <!----></a></div></div><div class="item" data-v-59634de5><div class="nav-link" data-v-59634de5 data-v-fca5ba4e><a class="item" href="/vdes-template/doc-en/plugins/" data-v-fca5ba4e>Plugins <!----></a></div></div><div class="item" data-v-59634de5><div class="nav-link" data-v-59634de5 data-v-fca5ba4e><a class="item" href="/vdes-template/doc-en/playground/" data-v-fca5ba4e>Playground <!----></a></div></div><div class="item" data-v-59634de5><div class="nav-dropdown-link" data-v-59634de5 data-v-6b1b155c><button class="button" data-v-6b1b155c><span class="button-text" data-v-6b1b155c>Languages</span><span class="right button-arrow" data-v-6b1b155c></span></button><ul class="dialog" data-v-6b1b155c><!--[--><li class="dialog-item" data-v-6b1b155c><div class="nav-dropdown-link-item" data-v-6b1b155c data-v-8cf50262><a class="item" href="/vdes-template/doc-en/" data-v-8cf50262><span class="arrow" data-v-8cf50262></span><span class="text" data-v-8cf50262>English</span><span class="icon" data-v-8cf50262><!----></span></a></div></li><li class="dialog-item" data-v-6b1b155c><div class="nav-dropdown-link-item" data-v-6b1b155c data-v-8cf50262><a class="item" href="/vdes-template/doc-en/" data-v-8cf50262><span class="arrow" data-v-8cf50262></span><span class="text" data-v-8cf50262>中文</span><span class="icon" data-v-8cf50262><!----></span></a></div></li><!--]--></ul></div></div><!--]--><!----><div class="item" data-v-59634de5><div class="nav-link" data-v-59634de5 data-v-fca5ba4e><a class="item isExternal" href="https://github.com/vdesjs/vdes-template" target="_blank" rel="noopener noreferrer" data-v-fca5ba4e>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-fca5ba4e><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-0440da26><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#introduction">Introduction</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#what-is-vdes-template">What is vdes-template?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#how-to-implement">How to implement?</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#installation">Installation</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#syntax">Syntax</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#output">Output</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#raw-output">Raw output</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#condition">Condition</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#loop">Loop</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#variable">Variable</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#template-inheritance">Template inheritance</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#sub-template">Sub template</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#comments">Comments</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#advanced">Advanced</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#extend-runtime">extend runtime</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#parsing-rules">Parsing rules</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#options">options</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#compileoptions">CompileOptions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#precompileoption">PreCompileOption</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#defaultsetting">defaultSetting</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#api">API</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#template">template</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compile">compile</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#render">render</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7b1d4fe4><div class="container" data-v-7b1d4fe4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7b1d4fe4><div><h2 id="introduction"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2><h3 id="what-is-vdes-template"><a class="header-anchor" href="#what-is-vdes-template" aria-hidden="true">#</a> What is vdes-template?</h3><p>vdes-template is a javascript template engine, It rewrite in typescript based on the <a href="https://github.com/aui/art-template" target="_blank" rel="noopener noreferrer">art-template</a>.</p><p>It uses a tempalte and a input object to genearte any you want code!</p><p>If you want use vdes-template in the node enviroment.</p><div class="language-html"><pre><code>// ./aaa.vdest

hello! I am {{name}}
</code></pre></div><div class="language-js"><pre><code><span class="token comment">// use before make sure run commond: yarn add vdes-template</span>
<span class="token keyword">const</span> vdesTemplate <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;vdes-template&#39;</span><span class="token punctuation">)</span> <span class="token comment">// or import {template} from &#39;vdes-template&#39;</span>
<span class="token keyword">const</span> genCode <span class="token operator">=</span> vdesTemplate<span class="token punctuation">.</span><span class="token function">template</span><span class="token punctuation">(</span><span class="token string">&#39;./aaa.vdest&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     name<span class="token operator">:</span> <span class="token string">&#39;vdes-template&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">lgo</span><span class="token punctuation">(</span>genCode<span class="token punctuation">)</span> <span class="token comment">// hello! I am vdes-template</span>
</code></pre></div><p>If you want use vdes-template in the browser enviroment</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>https://unpkg.com/vdes-template@latest/dist/vdes-template.umd.js<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"> </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>aaa.vdest<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    hello<span class="token operator">!</span> <span class="token constant">I</span> am <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> genCode <span class="token operator">=</span> vdesTemplate<span class="token punctuation">.</span><span class="token function">template</span><span class="token punctuation">(</span><span class="token string">&#39;./aaa.vdest&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     name<span class="token operator">:</span> <span class="token string">&#39;vdes-template&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>genCode<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>The above code just is an example to help you understand, It is not recommended to play.</p><h3 id="how-to-implement"><a class="header-anchor" href="#how-to-implement" aria-hidden="true">#</a> How to implement?</h3><p>If the template code is this:</p><div class="language-text"><pre><code>I am {{name}}
</code></pre></div><p>First, The code should be converted to an array of text and expression combinnations using a regular expression, like this:</p><div class="language-js"><pre><code><span class="token punctuation">[</span><span class="token string">&#39;I am &#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;{{name}}&#39;</span><span class="token punctuation">]</span>

</code></pre></div><p>Then, The expression will be parsed and to genarte render function like this:</p><div class="language-js"><pre><code><span class="token keyword">var</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     $data <span class="token operator">=</span> $data <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
     <span class="token keyword">var</span> $$out <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> $data<span class="token punctuation">.</span>name
     $$out <span class="token operator">+=</span> <span class="token string">&quot;I am &quot;</span>
     $$out <span class="token operator">+=</span> name
     <span class="token keyword">return</span> $$out
<span class="token punctuation">}</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     name<span class="token operator">:</span> <span class="token string">&#39;vdes-template&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// I am vdes-template</span>
</code></pre></div><p>Read the render function carefully, I think you should read about how it works. But this is simple example. You want a more detailled understanding of how it works. Please try click the top of menu itme <code>Playground</code> to online running!</p><h3 id="installation"><a class="header-anchor" href="#installation" aria-hidden="true">#</a> Installation</h3><h4 id="npm"><a class="header-anchor" href="#npm" aria-hidden="true">#</a> npm</h4><div class="language-shell"><pre><code><span class="token function">npm</span> <span class="token function">install</span> vdes-template

// or
<span class="token function">yarn</span> <span class="token function">add</span> vdes-template

</code></pre></div><h4 id="browser"><a class="header-anchor" href="#browser" aria-hidden="true">#</a> browser</h4><div class="language-js"><pre><code><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&#39;https://unpkg.com/vdes-template@latest/dist/vdes-template.umd.js&#39;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h2 id="syntax"><a class="header-anchor" href="#syntax" aria-hidden="true">#</a> Syntax</h2><h3 id="output"><a class="header-anchor" href="#output" aria-hidden="true">#</a> Output</h3><div class="language-js"><pre><code><span class="token comment">// inputData: {value}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token punctuation">}</span> 
<span class="token comment">// inputData: {data: {key}}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>key<span class="token punctuation">}</span><span class="token punctuation">}</span> or <span class="token punctuation">{</span><span class="token punctuation">{</span>data<span class="token punctuation">[</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token comment">// inputData: {arr: [&#39;eeee&#39;]}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span>a <span class="token operator">?</span> b <span class="token operator">:</span> c<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>a <span class="token operator">||</span> b<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>a <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>a <span class="token operator">+</span> b<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>a <span class="token operator">-</span> b<span class="token punctuation">}</span><span class="token punctuation">}</span>

</code></pre></div><h3 id="raw-output"><a class="header-anchor" href="#raw-output" aria-hidden="true">#</a> Raw output</h3><div class="language-js"><pre><code><span class="token punctuation">{</span><span class="token punctuation">{</span>@ value<span class="token punctuation">}</span><span class="token punctuation">}</span>

</code></pre></div><h3 id="condition"><a class="header-anchor" href="#condition" aria-hidden="true">#</a> Condition</h3><div class="language-js"><pre><code><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">if</span> v1<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">...</span><span class="token punctuation">.</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">if</span> v1<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">...</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">else</span> <span class="token keyword">if</span> v2<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">...</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">else</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">...</span>  <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="loop"><a class="header-anchor" href="#loop" aria-hidden="true">#</a> Loop</h3><div class="language-js"><pre><code><span class="token punctuation">{</span><span class="token punctuation">{</span>each target<span class="token punctuation">}</span><span class="token punctuation">}</span>
     <span class="token punctuation">{</span><span class="token punctuation">{</span>$index<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>$value<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>each<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><ol><li><code>target</code> supports iteration of array and object.</li><li>$value and $index can be customized:<div class="language-text"><pre><code>{{each target val index}}
</code></pre></div></li></ol><h3 id="variable"><a class="header-anchor" href="#variable" aria-hidden="true">#</a> Variable</h3><div class="language-"><pre><code>{{set temp = val}}
</code></pre></div><h3 id="template-inheritance"><a class="header-anchor" href="#template-inheritance" aria-hidden="true">#</a> Template inheritance</h3><div class="language-js"><pre><code><span class="token punctuation">{</span><span class="token punctuation">{</span>extend <span class="token string">&#39;./layout.vdest&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>block<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">...</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>block<span class="token punctuation">}</span><span class="token punctuation">}</span>

</code></pre></div><p>Template inheritance allows you to build a basic templating &quot;skeleton&quot; that conaints common parts of your site. Example:</p><div class="language-html"><pre><code><span class="token comment">&lt;!-- layout.vdest --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meat</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span> {{block &#39;title&#39;}} My site title {{/block}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html"><pre><code><span class="token comment">&lt;!-- index.vdest --&gt;</span>
{{extend &#39;./layout.vdest&#39;}}
{{block &#39;title&#39;}}vdes-template{{/block}}
</code></pre></div><p>If render index.vdest. That will output this:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meat</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>vdes-template<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="sub-template"><a class="header-anchor" href="#sub-template" aria-hidden="true">#</a> Sub template</h3><div class="language-"><pre><code>{{include &#39;./header.vdest&#39;}}
</code></pre></div><h3 id="comments"><a class="header-anchor" href="#comments" aria-hidden="true">#</a> Comments</h3><p>Support line comments and block comments</p><div class="language-js"><pre><code><span class="token comment">// ...</span>

<span class="token comment">/*...*/</span>
</code></pre></div><h2 id="advanced"><a class="header-anchor" href="#advanced" aria-hidden="true">#</a> Advanced</h2><h3 id="extend-runtime"><a class="header-anchor" href="#extend-runtime" aria-hidden="true">#</a> extend runtime</h3><p>We can extend or modify the runtime to achieve what we want:</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span>compile<span class="token punctuation">,</span> runtime<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vdes-template&quot;</span>
<span class="token keyword">const</span> myRuntime <span class="token operator">=</span> runtime
myRuntime<span class="token punctuation">.</span><span class="token function-variable function">$hello</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token string">&quot;hello world&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     source<span class="token operator">:</span> <span class="token string">&#39;{{$imports.$hello()}}&#39;</span><span class="token punctuation">,</span>
     imports<span class="token operator">:</span> myRuntime 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">// hello world</span>

</code></pre></div><h3 id="parsing-rules"><a class="header-anchor" href="#parsing-rules" aria-hidden="true">#</a> Parsing rules</h3><p>You can customize template parsing rules in vdes-template. The default sysntx:</p><div class="language-"><pre><code>defaultSetting.rules[0].test = /{{([@#]?)[ \t]*(\/?)([\w\W]*?)[ \t]*}}/
</code></pre></div><h2 id="options"><a class="header-anchor" href="#options" aria-hidden="true">#</a> options</h2><h3 id="compileoptions"><a class="header-anchor" href="#compileoptions" aria-hidden="true">#</a> CompileOptions</h3><div class="language-javascript"><pre><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">CompilerOption</span> <span class="token punctuation">{</span>
   <span class="token comment">// Template content. If haven&#39;t the field, the content is loaded according to the filename</span>
   source<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
   <span class="token comment">// Template filename</span>
   filename<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
   <span class="token comment">// An array of rules of template syntax</span>
   rules<span class="token operator">?</span><span class="token operator">:</span> TplTokenRule<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token comment">// Whether to enable automatic encoding of template output statements</span>
   escape<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
   <span class="token comment">// Whether to enable to debug mode</span>
   debug<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
   <span class="token comment">// If ture, both the compile and runtime errors throw exceptions</span>
   bail<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
   
   cache<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
   <span class="token comment">// Whether to enable minization, It will execute htmlMinifier and minimize HTML, CSS, JS. Only take effect with node enviroment</span>
   minisize<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
   <span class="token comment">// Whether to compile in debug mode</span>
   compileDebug<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
   <span class="token comment">// Transition template path</span>
   resolveFilename<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">filename<span class="token operator">:</span> string<span class="token punctuation">,</span> options<span class="token operator">:</span> CompilerOption</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> string<span class="token punctuation">,</span>
   <span class="token comment">// Include sub template</span>
   include<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">filename<span class="token operator">:</span> string<span class="token punctuation">,</span> data<span class="token operator">:</span> object<span class="token punctuation">,</span> blocks<span class="token operator">:</span> object<span class="token punctuation">,</span> options<span class="token operator">:</span> CompilerOption</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> string<span class="token punctuation">,</span>
   <span class="token comment">// Html compression, effect only nodejs</span>
   htmlMinifier<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">source<span class="token operator">:</span> string<span class="token punctuation">,</span> options<span class="token operator">:</span> CompilerOption</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> string<span class="token punctuation">,</span>
   htmlMinifierOptions<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
       collapseWhitespace<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
       minifyCSS<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
       minifyJS<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
       ignoreCustomFragments<span class="token operator">?</span><span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token comment">// Effect only bail=false</span>
   onerror<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token operator">:</span> any<span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> CompilerOption</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span>
   <span class="token comment">// Template file loader</span>
   loader<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">filename<span class="token operator">:</span> string<span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> CompilerOption</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> string<span class="token punctuation">,</span>
   <span class="token comment">// Cache adapter</span>
   caches<span class="token operator">?</span><span class="token operator">:</span> Caches<span class="token punctuation">,</span>
   <span class="token comment">// Root directory of template. If filename field is not a local path, template will be found in root directory</span>
   root<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
   <span class="token comment">// Default extension. If no extensions, Extname will be automatically added</span>
   extname<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
   <span class="token comment">// An array of template variables ignored by template compiler</span>
   ignore<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token comment">// runtime</span>
   imports<span class="token operator">?</span><span class="token operator">:</span> Object

<span class="token punctuation">}</span>

</code></pre></div><h3 id="precompileoption"><a class="header-anchor" href="#precompileoption" aria-hidden="true">#</a> PreCompileOption</h3><div class="language-javascript"><pre><code><span class="token keyword">export</span> type PreCompileOption <span class="token operator">=</span> CompilerOption <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
    sourceMap<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
    sourceRoot<span class="token operator">?</span><span class="token operator">:</span> string
<span class="token punctuation">}</span>

</code></pre></div><h3 id="defaultsetting"><a class="header-anchor" href="#defaultsetting" aria-hidden="true">#</a> defaultSetting</h3><div class="language-javascript"><pre><code><span class="token keyword">export</span> <span class="token keyword">const</span> defaultSetting<span class="token operator">:</span> CompilerOption <span class="token operator">=</span> <span class="token punctuation">{</span>
    source<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>

    rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">VdesTRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    escape<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    debug<span class="token operator">:</span> detectNode <span class="token operator">?</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&#39;production&#39;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    bail<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    cache<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minisize<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    compileDebug<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    resolveFilename<span class="token operator">:</span> resolveFilename<span class="token punctuation">,</span>
    include<span class="token operator">:</span> include<span class="token punctuation">,</span>
    htmlMinifier<span class="token operator">:</span> htmlMinifier<span class="token punctuation">,</span>
    htmlMinifierOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        minifyCSS<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        minifyJS<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        ignoreCustomFragments<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onerror<span class="token operator">:</span> onerror<span class="token punctuation">,</span>
    loader<span class="token operator">:</span> loader<span class="token punctuation">,</span>
    caches<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Caches</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    root<span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>
    extname<span class="token operator">:</span> <span class="token string">&#39;.vdest&#39;</span><span class="token punctuation">,</span>
    ignore<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    imports<span class="token operator">:</span> runtime

<span class="token punctuation">}</span><span class="token punctuation">;</span>


</code></pre></div><h2 id="api"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h2><h3 id="template"><a class="header-anchor" href="#template" aria-hidden="true">#</a> template</h3><h4 id="define"><a class="header-anchor" href="#define" aria-hidden="true">#</a> Define:</h4><ul><li>Render templates according to template name</li><li>Content is object,render template and renturn strinng. Content is string, compile template and return function.</li></ul><div class="language-javascript"><pre><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">filename<span class="token operator">:</span> string<span class="token punctuation">,</span> content<span class="token operator">:</span> string <span class="token operator">|</span> object</span><span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token operator">|</span> Function
</code></pre></div><h4 id="usages"><a class="header-anchor" href="#usages" aria-hidden="true">#</a> Usages:</h4><div class="language-javascript"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span>template<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vdes-template&#39;</span>

<span class="token comment">// From local to load template</span>
<span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token function">template</span><span class="token punctuation">(</span><span class="token string">&#39;./hello.vdest&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     val<span class="token operator">:</span> <span class="token string">&#39;aaaaa&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Compile template and cache it</span>
<span class="token function">template</span><span class="token punctuation">(</span><span class="token string">&#39;./hello.vdest&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;I am {{val}}&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token function">template</span><span class="token punctuation">(</span><span class="token string">&#39;./hello.vdest&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     val<span class="token operator">:</span> <span class="token string">&#39;aaaaaa&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="compile"><a class="header-anchor" href="#compile" aria-hidden="true">#</a> compile</h3><h4 id="define-1"><a class="header-anchor" href="#define-1" aria-hidden="true">#</a> Define</h4><p>Compile template and renturn a rendering function</p><div class="language-javascript"><pre><code><span class="token keyword">function</span> <span class="token function">compile</span><span class="token punctuation">(</span><span class="token parameter">source<span class="token operator">:</span> string <span class="token operator">|</span> CompilerOption<span class="token punctuation">,</span> options<span class="token operator">:</span> CompilerOption <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token operator">:</span> CompilerRenderFunc

</code></pre></div><h4 id="usages-1"><a class="header-anchor" href="#usages-1" aria-hidden="true">#</a> Usages:</h4><div class="language-"><pre><code>import {compile} from &quot;vdes-template&quot;
compile({
     filename: &#39;./hello.vdest&#39;
}).render({
     val: &#39;aaaa&#39;
})
</code></pre></div><h3 id="render"><a class="header-anchor" href="#render" aria-hidden="true">#</a> render</h3><h4 id="define-2"><a class="header-anchor" href="#define-2" aria-hidden="true">#</a> Define:</h4><p>Compile and return rendering results</p><div class="language-"><pre><code>export function render(source: string | CompilerOption, data: object, options?: CompilerOption)
</code></pre></div><h4 id="usages-2"><a class="header-anchor" href="#usages-2" aria-hidden="true">#</a> Usages:</h4><div class="language-"><pre><code>import {render} from &quot;vdes-template&quot;
render(&#39;I am {{val}}&#39;, {val: &#39;aaaa&#39;})

</code></pre></div></div></div><footer class="page-footer" data-v-7b1d4fe4 data-v-ddb5fa86><div class="edit" data-v-ddb5fa86><div class="edit-link" data-v-ddb5fa86 data-v-6bd76a75><a class="link" href="https://github.com/vdesjs/vdes-template/edit/master/packages/docs/doc-en/guide/index.md" target="_blank" rel="noopener noreferrer" data-v-6bd76a75>Suggest changes to this page <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6bd76a75><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-ddb5fa86><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"b550f318\",\"guide_index.md\":\"26ae6196\",\"plugins_index.md\":\"26eac71c\"}")</script>
    <script type="module" async src="/vdes-template/doc-en/assets/app.8989515f.js"></script>
  </body>
</html>